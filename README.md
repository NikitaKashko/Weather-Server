# Weather-Server
FastAPI сервер для получения и обработки информации о погоде с сервиса open-meteo.com

Разработал: Кашко Никита
Контакты: +79059188048, kashko-work@yandex.ru, @ya_ne_prodamsya_v_rabstvo (Telegram)

Все зависимости описаны в файле requirements.txt
\n
Сервер запускается скриптом script.py на адресе 127.0.0.1:8000
Приложение являет собой REST API сервер, обрабатывающий JSON запросы по 4 эндпоинтам, о них:
\n
# POST /weather/current
Принимает JSON файл с полями latitude(широта) - число с плавающей точкой и longitude(долгота) - число с плавающей точкой, в ответ даёт JSON файл с полями temperature, wind_speed, pressure,
с данными о температуре, скорости ветра и давлении соответственно в заданной точке в данный момент.
JSON запроса выглядит так \n
{\n
  "latitude": -90,\n
  "longitude": -180\n
}\n
JSON ответа так:\n
{\n
  "temperature": -38.9,\n
  "wind_speed": 16.6,\n
  "pressure": 677.8\n
}\n
Взаимодействовать с ним можно либо через API с другого приложения, либо через интерфейс по относительному адресу /docs, где необходимо открыть сползающее окно с соответствующим адресом, нажать кнопку Try It Out, в поле Request Body
вписать свои значения и нажать Execute. Для остальных эндпоинтов алгоритм действий будет аналогичен. Под надписью Responses будет окно с ответом сервера.
JSON Выглядит так
\n
# POST /cities/add
Принимает JSON файл с полями name(название города) - строка, coordinates(координаты города) - словарь с полями latitude и longitude - аналогичные методу выше и user_id(ID пользователя) - целое число. Возвращает статус код 200 если все ок
или другие если в запросе допущены ошибки
JSON запроса\n
{\n
  "name": "string",\n
  "coordinates": {\n
    "latitude": -90,\n
    "longitude": -180\n
  },\n
  "user_id": 1\n
}\n
\n
# GET /cities/list/{user_id}
Возвращает список отслеживаемых городов для пользователя или ответ со статус-кодами 4ХХ если пользователя не существует, или ID указан неверно
\n
POST /cities/weather
Возвращает заданные параметры погоды города по его названию и id пользователя в заданное время. Т.к. open-meteo не предоставляет возможности запросить погоду за конкретное время, запрашиваем за ближайший  заданному времени час.
JSON запроса\n
{\n
  "name": "Moskow",\n
  "request_time": "02:25:01.534Z",\n
  "user_id": 1,\n
  "params": [\n
    "temperature_2m", "wind_speed_10m"\n
  ]\n
}\n
Тут params - список получаемых погодных параметров, который ограничен четырьмя - ('temperature_2m', 'wind_speed_10m', 'precipitation', 'relative_humidity_2m') - температура, скорость ветра, осадки и влажность, их комбинации определяют что мы получим,
JSON ответа\n
{\n
  "temperature_2m": -38.9,\n
  "wind_speed_10m": 16.6\n
}\n
\n
# POST /user/register\n
Принимает JSON файл с полем login - строка. Возвращает id пользователя. если пользователь уже зарегистрирован - так же возвращает id пользователя
